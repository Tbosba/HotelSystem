@model IEnumerable<HotelSystem.Models.ChatClass>
@using Microsoft.AspNet.Identity
@using HotelSystem.Models
@{
    ViewBag.Title = "Chat";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}



<section class="ad-post bg-gray py-5">
    <!-- Container Start -->
    <div class="container">
        <fieldset class="border border-gary p-4 mb-5">
            <!-- Row Start -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center pb-5">
                        <h2 class="font-weight-bold" style="text-align:center;color:#dd4b39;font-family:'Bradley Hand ITC'">Respond to a Query</h2>
                    </div>
                    @*<div class="box-tools pull-right">
                <a class="btn btn-outline-danger badge" href="@Url.Action("ClearChat","Home")">Clear Query</a>
            </div>*@
                </div>
                @if (Model.Count() <= 0)
                {

                    <div class="col-md-12">
                        <div class="alert alert-warning">
                            <b>Note :</b> No query available at the moment.
                        </div>
                    </div>

                }
                else
                {
                    <div class="col-lg-12">
                        <!-- /.box-header -->
                        <div class="box-body">
                            <!-- Conversations are loaded here -->
                            <div class="direct-chat-messages">
                                @foreach (var item in Model)
                                {

                                    if (item.Employee == null)
                                    {
                                        <div class="direct-chat-msg">
                                            <div class="direct-chat-info clearfix">
                                                <span class="direct-chat-name pull-left">@item.FirstName &nbsp; @item.LastName</span>
                                                <span class="direct-chat-timestamp pull-right">@item.Time</span>
                                            </div>
                                            <!-- /.direct-chat-info -->

                                            <div class="direct-chat-text">
                                                @item.ChatContent
                                                @if (item.ChatStatus != "read")
                                                {
                                                    <a class="btn btn-outline-success badge pull-right" href="@Url.Action("Response", new { id = item.Id })">Respond</a>
                                                }
                                            </div>
                                            <!-- /.direct-chat-text -->
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="direct-chat-msg right">
                                            <div class="direct-chat-info clearfix">
                                                <span class="direct-chat-name pull-right">@item.FirstName &nbsp; @item.LastName</span>
                                                <span class="direct-chat-timestamp pull-left">@item.Time</span>
                                            </div>
                                            <!-- /.direct-chat-info -->

                                            <div class="direct-chat-text">
                                                @item.ChatContent
                                            </div>
                                            <!-- /.direct-chat-text -->
                                        </div>
                                    }

                                    <!-- /.box-body -->
                                }
                            </div>
                        </div>

                    </div>
                }
            </div>
        </fieldset>
        <!-- Row End -->
    </div>
    <!-- Container End -->
</section>
<section class="popular-deals section bg-gray">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="trending-ads-slide">

                </div>
            </div>
        </div>
    </div>
</section>
